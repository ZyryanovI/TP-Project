Игровая механика

В игре есть две противоборствующие стороны, каждая имеет какой-то набор доступных юнитов (башен).
Карта состоит из нескольких точек, некоторые из точек соединены. В результате получается планарный связный граф. 
Каждый игрок начинает, имея 1-го юнита (базу). Во время игры игрок может поставить на некоторую свободную точку своего юнита, если она связана через других его юнитов с базой. Если в какой-то момент башня теряет связность (через своих юнитов) с базой - она отключается, т. е. не может атаковать и совершать другие действия.
Каждый юнит стоит некоторое количество ресурса и имеет некоторый кулдаун на создание.
Большинство юнитов имеют определенный урон, запас здоровья и радиус атаки. Юнит может атаковать вражеских юнитов, находящихся в пределах его радиуса атаки.
Каждый игрок имеет некоторый базовый прирост ресурса. Кроме того, некоторые юниты могут увеличить этот прирост.

Юниты:
1) База - основной юнит, может атаковать как и обычная башня.
2) Обычная башня - просто атакует.
3) Дальнобойная башня - имеет меньший запас здоровья и большую стоимость, чем обычная башня, но ее радиус атаки больше.
4) Защитное сооружение - имеет большой запас здоровья и не может атаковать.
5) Ракетная установка - не может атаковать, имеет способность уничтожить любую вражескую башню (кроме базы). В момент создания способность начинает перезаряжаться. Кулдаун способности - примерно 30 секунд.
6) Мобильная башня - атакует как обычная башня, но может быть построена в любом месте на карте, не требует связности с базой для атаки и имеет активную способность телепортироваться в любую точку карты.
7) Башня поддержки - не может атаковать, вместо этого увеличивает урон союзной башни в пределах радиуса действия.
8) Лечащая башня - лечит все союзные башни в радиусе действия.
9) Добывающая башня - увеличивает прирост ресурсов.
10) Генератор - "запитывает" все связанные с ней башни, т. е. они продолжают работать даже если отключились от базы. Также добывает ресурс.


Архитектура
Есть класс CTower, содержащий вектор компонент. Любой юнит - это объект типа CTower. Есть абстрактный класс IFactory и его реализации для каждого вида башни. IFactory содержит метод Create, возвращающий указатель на башню нужного типа (который определяется конкретной реализацией).

Есть абстрактный класс IProducer и его реализация (пока что одна). Он содержит метод Create, который, используя фабрику, создает башню, и делает все побочные игровые действия (откатывает создание башни на кулдаун, списывает ресурсы со счета игрока и т. д.), а также метод bool IsAbleToCreate, проверяющий, может ли башня быть создана (у игрока достаточно денег и башня не на кулдауне) Конструируется от указателя на IFactory, при конструировании берет из нее параметры COST и CREATE_KD.

Каждая башня состоит из компонент, в компоненте указана какая-то поведенческая составляющая. Существуют интерфейсы компонент и их реализации.

Кроме башен, существуют классы CPoint (отвечает за точку на карте), CPlayer (отвечает за игрока) и CGame, являющийся Singleton-ом (отвечает за всю игровую партию).
Компоненты (по интерфейсам)
Position - отвечает за расположение точки на карте. Имеет одну реализацию, которая содержит указатель на точку.

Graphic - отвечает за отображение башни. Имеет пока не придумали сколько и каких реализаций.

Accessory - отвечает за принадлежность башни некоторому игроку. Имеет одну реализацию, содержащую указатель на нужного игрока.

Health - отвечает за получение башней урона. Имеет одну реализацию.

Power - отвечает за запитывание башни и “передачу” сигнала. Имеет 3 реализации:
1) Запитывается, если связана с запитывающей башней.
2) Запитана всегда
3) Запитана всегда, при этом запитывает все связанные с ней башни.

ActiveSkill - Отвечает за некоторую способность. Имеет две реализации - для ракетной установки и телепортирующейся башни.

TargetSkill - Отвечает за пассивную способность, для которой можно выбирать цель. Имеет 2 реализации - для атакующих башен и башни поддержки.

PassiveSkill - Отвечает за некоторый пассивный эффект. Имеет две реализации - для добывающей башни и лечащей башни.
